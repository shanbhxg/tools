<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&family=Roboto:wght@300&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./css/view.css">
    <!-- <script src="scripts/view.js"></script> -->
    <title>Software Tool Management</title>
</head>
<body>
    <div class="header_nav p-4 bg-black/60 sm:min-w-[29rem] sm:min-h-[8rem]">
        <div class="headernav_inner_contents">
            <div class="dz-page-header-content-type-text dz-text">RTX Enterprise
                <ul class="nav justify-content-end">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="home.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="form.html">Add</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="view.html">View</a>
                    </li>
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-secondary" type="submit">Search</button>
                    </form>
                </ul>

            </div>
            <div class="dz-page-header-title headernav_inner_contents2">
                Pratt Whitney Tool Support
            </div>
        </div>
    </div>
    <h2 id="header"> Tools </h2>
    <div class="wrapper">
    <div class="container">
        <div id="team-list">
          <ul>
          </ul>
        </div>
      
        <div id="tool-details">
         </div>
      </div>
      </div>
    <script>
          // teams display
          
          async function fetchTeamsData() {
            try {
              const response = await fetch('teamsData.json');
              const data = await response.json();
              return data;
            } catch (error) {
              console.error('Error fetching teams data:', error);
              return [];
            }
          }
          
          async function displayTeams() {
            const teamsData = await fetchTeamsData(); // gettting data from json file
          
            let teamList = document.getElementById("team-list").getElementsByTagName("ul")[0]; // getting ul element
            teamList.innerHTML = ""; // clearing the ul element
          
            teamsData.forEach(team => { // looping through the data 
              let teamItem = document.createElement("li"); // creating li element
              teamItem.classList.add("team-item"); // adding class to the li element
              teamItem.textContent = "\t"+ team.name; 
              teamItem.onclick = () => handleTeamSelection(team); 
              teamList.appendChild(teamItem); 
            });
          }
          
          function displayTools(team) {
            let softwareToolsList = document.createElement("ul"); // creating ul element under the selected team
            softwareToolsList.classList.add("software-tools-list"); // adding class to the ul element
            team.softwareTools.forEach(tool => { // looping through the tools of the selected team
              let toolItem = document.createElement("li"); 
              toolItem.classList.add("tool-item"); 
              toolItem.textContent = tool.name;
              toolItem.onclick = () => displayToolDetails(tool);
              softwareToolsList.appendChild(toolItem);
              
            });
            
            let teamList = document.getElementById("team-list").getElementsByTagName("ul")[0];
            let selectedTeamItem = teamList.querySelector('.selected');
            
            let nextSibling = selectedTeamItem.nextSibling;
            
            if (nextSibling && nextSibling.classList.contains('software-tools-list')) {
              selectedTeamItem.parentNode.removeChild(nextSibling);
            } else {
              teamList.insertBefore(softwareToolsList, selectedTeamItem.nextSibling);
            }
          }
          
          function displayToolDetails(tool) {
            let toolDetails = document.getElementById("tool-details");
            toolDetails.innerHTML = ""; 
          
            let toolFields = tool.fields;
            Object.keys(toolFields).forEach(fieldName => {
              let fieldItem = document.createElement("div");
              fieldItem.classList.add("field-item");
              if (toolFields[fieldName]) {
                fieldItem.innerHTML = `<strong>${fieldName}:</strong> ${toolFields[fieldName]}`;
              }
              toolDetails.appendChild(fieldItem);
            });
            toolDetails.style.backgroundColor = '#0f4567bd';

            toolDetails.style.boxShadow = '0 0 10px 0 #000';
          }
          
          function handleTeamSelection(team) {
            let allTeamItems = document.querySelectorAll(".team-item");
            allTeamItems.forEach(item => item.classList.remove("selected"));
            let clickedTeamItem = event.target;
            clickedTeamItem.classList.add("selected");
            
            displayTools(team);
          }
          
          displayTeams();
          
    </script>
</body>
</html>